#!/usr/bin/env ruby

require_relative "../lib/zajal"

Zajal::Version.print

sketch_path = if ARGV.empty?
  require 'tempfile'
  tempfile = Tempfile.new "zajal-stdin-sketch"
  tempfile.write STDIN.read
  tempfile.close

  tempfile.path
else
  ARGV.first
end

# glfw = Zajal::Frontends::Glfw.new 400, 400
# glfw.sketch = Zajal::Frontends::Glfw::Sketch.new sketch_path
# glfw.run

fe = Zajal::Frontends::Headless.new 100, 100
fe.sketch = Zajal::Frontends::Headless::Sketch.new sketch_path
fe.run